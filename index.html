<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Twitter v1.1 API - A JavaScript and PHP solution</title>
		<script src='https://code.responsivevoice.org/responsivevoice.js'></script>
		<link rel="stylesheet" href="https://npmcdn.com/flickity@1.2/dist/flickity.min.css">
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<div class="carousel">
		  <div class="carousel-cell cellid-0"><h1>This is the first</h1></div>
		  <div class="carousel-cell cellid-1 "><h1>This is the second</h1></div>
		  <div class="carousel-cell cellid-2"><h1>Third</h1></div>
		  <div class="carousel-cell cellid-3"><h1>Fourth</h1></div>
		  <div class="carousel-cell cellid-4"><h1>And so on.</h1></div>
		</div>
		<script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
		<script src="https://npmcdn.com/flickity@1.2/dist/flickity.pkgd.min.js"></script>

		<script type="text/javascript">
 			responsiveVoice.OnVoiceReady = function() {

 					var $carousel = $('.carousel').flickity({
					  // options
					  cellAlign: 'left',
					  contain: true,
					  prevNextButtons: false,
					  pageDots: false,
					});

					var flkty = $carousel.data('flickity');

					function voiceStartCallback() {
					    console.log("Voice started");
					}
					 
					function voiceEndCallback() {
					    console.log("Voice ended");
					    $('.carousel').flickity('next');
					}
					 
					var parameters = {
					    onstart: voiceStartCallback,
					    onend: voiceEndCallback
					}

					responsiveVoice.speak($('.cellid-0').text(), "UK English Female", parameters)

					$carousel.on( 'cellSelect', function() {
					  console.log( $('.cellid-'+ flkty.selectedIndex).text() );
					  var str = $('.cellid-'+ flkty.selectedIndex).text();
					  responsiveVoice.speak(str, "UK English Female", parameters)
					 	

					})

 					var str = "";


				};

		</script>
	</body>
</html>